{% extends "time_series_manager/base.html" %}
{% load tethys_gizmos %}
{% load staticfiles %}

{% block header_buttons %}
 <div class="header-button glyphicon-button" data-toggle="tooltip" data-placement="bottom" title="Upload Jupyter Notebook or Python Script to HydroShare">
    <a data-toggle="modal" data-target="#modalLoadFile"><span class="glyphicon glyphicon-cloud-upload"></span></a>
  </div>
  <div class="header-button glyphicon-button" data-toggle="tooltip" data-placement="bottom" title="Help">
    <a data-toggle="modal" data-target="#help-modal"><span class="glyphicon glyphicon-question-sign"></span></a>
  </div>

{% endblock %}
{% block app_navigation_items %}
<p></p>
<h6>Select a Script <a data-toggle="modal" data-target="#help-modal" data-toggle="tooltip" data-placement="bottom" title="Help"><span class="glyphicon glyphicon-question-sign"></span></a></h6>
<div class="input-group">
    <select class="form-control" id="sel1" style="display: inline-block;"></select>
    <span class="input-group-btn">
        <button class="btn btn-default" type="button" ><span class="glyphicon glyphicon-refresh" aria-hidden="true" data-toggle="tooltip" data-placement="bottom" title="Refresh Script List"></span></button>
    </span>
</div>
<hr>
<div >
    <h6>Description <a data-toggle="modal" data-target="#help-modal" data-toggle="tooltip" data-placement="bottom" title="Help"><span class="glyphicon glyphicon-question-sign"></span></a></h6>
  </div>
<div id = "scriptDescription"></div>
<hr>
<h6>Required Variables <a data-toggle="modal" data-target="#help-modal" data-toggle="tooltip" data-placement="bottom" title="Help"><span class="glyphicon glyphicon-question-sign"></span></a></h6>
<div id = "scriptVar"></div>
<hr>
 <!--<button type="button" class="btn btn-info "  data-toggle="modal" data-target="#help-modal" style="float: left; position:relative">-->
        <!--<span id = 'get_data_span' data-toggle="tooltip" data-placement="bottom" title = "Get Data for New Selection" class="glyphicon glyphicon-question-sign"></span>-->
  <!--</button>-->
<p></p>
<button id = "divViewScript" type="button" class="btn btn-info" name="None" onclick="viewScript(this.name)">
    View Script
</button>
 <button type="button" class="btn btn-info" style="float: left; position:relative" onclick="uploadToGoogle()">
     Launch with Google Colaboratory
 </button>






{% endblock %}

{% block app_content %}
<div id = "stat_div" >
    <button type="button" class="btn btn-success" style="float: right; position:relative" onclick="get_list_hs_res()" data-toggle="modal" data-target="#modalLoadRes">
        Add Time Series from HydroShare
    </button>
    <table id="data_table" class="display" cellspacing="0" width="100%" style="">
        <thead>
        <tr>
            <!--<th> <div style='text-align:center'><input class = 'checkbox' id ='master_chk' name ='master_chk' data-resid =" + res_id-->
                    <!--+ " type='checkbox' onClick ='series_visiblity_toggle(this.id,this.name);'checked = 'checked'></div></th>-->
            <th>Please assign variable to script</th>
            <th>Organization</th>
            <th>Site Name</th>
            <th>Variable</th>
            <th>Variable Unit</th>
            <th>Quality Control</th>
            <th>Value Count</th>
            <th>View Resource</th>
        </tr>
        </thead>
        <tfoot><tr>
            <th> </th>
            <th>Organization</th>
            <th>Site Name</th>
            <th>Variable</th>
            <th>Variable Unit</th>
            <th>Quality Control</th>
            <th>Value Count</th>
            <th>View Resource</th>
        </tr></tfoot>
    </table>

</div>


{% endblock %}

{# Use the after_app_content block for modals #}
{% block after_app_content %}
  <!-- Example Modal -->
  <div class="modal fade" id="help-modal" tabindex="-1" role="dialog" aria-labelledby="help-modal-label">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h5 class="modal-title" id="help-modal-label">Example Modal</h5>
        </div>
        <div class="modal-body">
          <p>You can add custom buttons to the app header using the <code>header_buttons</code> block. Use anchor/link tags for the button and wrap it in a div with the class <code>header-button</code>. For buttons with the gliphyicons, add the <code>glyphicon-button</code> class as well.</p>
          <p>Ever have trouble using a modal in a Tethys app? Use the <code>after_app_content</code> block for modal content to allow them to function properly. See: <a href="https://getbootstrap.com/javascript/#modals">Bootstrap Modals</a></p>
          <p>Add tooltips to any element by adding the <code>data-toggle</code>, <code>data-placement</code>, and <code>title</code> attributes to the button. See: <a href="https://getbootstrap.com/javascript/#tooltips">Bootstrap Tooltips</a></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
        </div>
      </div>
    </div>
  </div>
<div class="modal fade" id="view-script-modal" tabindex="-1" role="dialog" aria-labelledby="help-modal-label">
    <div class="modal-dialog" style="width:80%;" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h5 class="modal-title" id="view-script-modal-label"></h5>
            </div>
            <div class="modal-body">
                <pre id="scriptViewer"></pre>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
            </div>
        </div>
    </div>
</div>

<div id="modalLoadFile" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Add Local File</h4>
            </div>
            <div class="modal-body">
                <h5>1. Choose where to store files:</h5>
                <div id="projNotSavedInfo" class="alert-danger" hidden>
                    Your project is not currently saved. Please save the project or choose to store files in a
                    unique resource.
                </div>

                <fieldset id="fields-newRes">
                    <div class="form-group">
                        <label for="resTitle" class="control-label">Resource Title:</label>
                        <input type="text" class="form-control resField" id="resTitle">
                    </div>
                    <div class="form-group">
                        <label for="resAbstract" class="control-label">Resource Abstract:</label>
                        <textarea rows="6" cols="50" id="resAbstract" class="form-control resField"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="resKeywords" class="control-label">Resource Keywords:</label>
                        <input type="text" class="form-control resField" id="resKeywords">
                    </div>
                </fieldset>
                <h5>2. Choose files:</h5>
                <input id="input-files" type="file">
                <br>
                <div id="msg-file" class="hidden"></div>
            </div>
            <div class="modal-footer">
                <div class="button-group flex1-0">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" id="btn-upload-file" class="btn btn-default btn-upload" onclick="uploadHydroShare()">Add</button>
                </div>
            </div>
        </div>
        <!--End modal content-->
    </div>
</div>
<!--End modal-->
<div id="modalLoadRes" class="modal fade" role="dialog">

        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Add HydroShare Resource</h4>
                </div>
                <div class="modal-body">
                    <div id = loading_hs>
                        <div class="cssload-loader">
                            <div class="cssload-dot"></div>
                            <div class="cssload-dot"></div>
                            <div class="cssload-dot"></div>
                            <div class="cssload-dot"></div>
                            <div class="cssload-dot"></div>
                        </div>
                    </div>
                     <table id="hs_resource_table" class="display" cellspacing="0" width="100%">
                        <thead>
                        <tr>
                            <!--<th></th>-->
                            <th></th>
                            <th>Title</th>
                            <th>Type</th>
                            <th>Author</th>
                            <th>Last Updated</th>
                            <!--<th>Download Data</th>-->
                        </tr>
                        </thead>
                        <tfoot><tr>

                            <th></th>
                            <th>Title</th>
                            <th>Type</th>
                            <th>Author</th>
                            <th>Last Updated</th>
                            <!--<th>Download Data</th>-->
                        </tr></tfoot>
                    </table>

                </div>
                <div class="modal-footer">
                    <div class="button-group flex1-0">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" id="btn-upload-res" class="btn btn-success btn-upload" onClick = "getAddHS()">Add</button>
                    </div>
                </div>
            </div>
            <!--End modal content-->
        </div>
    </div>
{% endblock %}

{% block app_actions %}

{% endblock %}
{% block scripts %}
  {{ block.super }}
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <!--<script src="{% static 'time_series_script_manager/js/google_api.js' %}" type="text/javascript"></script>-->
    <script src="{% static 'time_series_script_manager/js/main.js' %}" type="text/javascript"></script>
    <script src="https://cdn.datatables.net/1.10.10/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.4.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.4.2/js/buttons.print.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.js"></script>
    <script src="https://cdn.datatables.net/plug-ins/1.10.16/api/column().title().js"></script>

{% endblock %}